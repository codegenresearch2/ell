from fastapi import FastAPI, HTTPException, Depends\"nfrom sqlmodel import SQLModel, Session\"nfrom typing import Optional\"nimport logging\"nfrom contextlib import contextmanager\"n\"napp = FastAPI()\"n\"n# Configuration class for managing settings\"nclass Config:\"n    DATABASE_URL = 'sqlite:///test.db'\"n\"n# Dependency to get a database session\"n@contextmanager\"ndef get_session():\"n    session = Session(bind=engine)\"n    try:\"n        yield session\"n    finally:\"n        session.close()\"n\"n# Logging setup\"nlogging.basicConfig(level=logging.INFO)\"nlogger = logging.getLogger(__name__)\"n\"n# User model\"nclass User(SQLModel, table=True):\"n    id: Optional[int] = Field(default=None, primary_key=True)\"n    username: str\"n    email: str\"n\"n# API endpoints\"n@app.get('/users')\"ndef get_users():\"n    with get_session() as session:\"n        users = session.query(User).all()\"n        return users\"n\"n@app.post('/users')\"ndef create_user(user: User):\"n    with get_session() as session:\"n        session.add(user)\"n        session.commit()\"n        session.refresh(user)\"n        return user\"n\"n# Error handling\"n@app.exception_handler(HTTPException)\"ndef http_exception_handler(request, exc):\"n    return JSONResponse(status_code=exc.status_code, content={'detail': exc.detail})\"n\"n# Main function to run the app\"nif __name__ == '__main__':\"n    import uvicorn\"n    uvicorn.run(app, host='0.0.0.0', port=8000)\"n